function handleLinks(){document.querySelectorAll("[data-link]").forEach((t=>{t.addEventListener("click",(async e=>{e.preventDefault();const n=t.getAttribute("href");try{const t=await fetch(n);if(!t.ok)throw new Error(`Erreur ${t.status}: ${t.statusText}`);const e=await t.text(),r=(new DOMParser).parseFromString(e,"text/html"),o=r.querySelector("body");document.body.replaceWith(o);const a=r.querySelector("title")?.textContent;a&&(document.title=a),history.pushState({},"",n),handleLinks()}catch(t){window.location.href="/404",console.error("Erreur de navigation:",t)}}))}))}addEventListener("DOMContentLoaded",handleLinks),addEventListener("popstate",handleLinks);